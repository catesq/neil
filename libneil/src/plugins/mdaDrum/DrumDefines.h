#pragma once

#include <stdint.h>
#include <functional>

// this should be a path in the neil settings folder, default .mdaDrumPath. use current dir if unset.
#ifndef MDA_DRUMS_PATH
    #define MDA_DRUMS_PATH ""
#endif

enum {
    START_DRUM_NOTES_OFFSET = 36,
    TOTAL_DRUM_OCTAVES = 2,
    TOTAL_DRUM_NOTES = 12 * TOTAL_DRUM_OCTAVES,
    TOTAL_DRUM_VOICES = 32
};

#define TRACKVAL_NO_DRUM 0xffff
#define TRACKVAL_NO_TIMESTRETCH 0xffff
#define TRACKVAL_DEFAULT_TIMESTRETCH 0x100


#define NEIL_NOTE_IN_HERTZ_A(noteNumber, aFreq) (aFreq * pow (2.0, (noteNumber - 64) / 12.0))
#define NEIL_NOTE_IN_HERTZ(noteNumber) NEIL_NOTE_IN_HERTZ_A(noteNumber, 440.0)

#define SAMPLES_PER_BLOCK 256
#define PI 3.14159265359
#define PI2 6.28318530718

#define MAX_TRACK 8
#define MAX_ENV_POINTS 24

#define MAX     0
#define ENV     1
#define PNT     2
#define dENV    3
#define NEXTT   4

#define POLY 0x82f63b78


uint32_t hash(float* fdata, unsigned count);


// All the parameters are stored internally as float
// The value of the enum * sizeof(float) is the byte offset of a parameter
enum {
    PP_MAIN_TUNING,
    PP_MAIN_STRETCH,
    PP_MAIN_GAIN,
    PP_MAIN_FILTER,
    PP_MAIN_HIGHPASS,
    PP_MAIN_RESONANCE,

    PP_MAIN_ENV_T1TIME, 
    PP_MAIN_ENV_T1GAIN, 
    PP_MAIN_ENV_T2TIME, 
    PP_MAIN_ENV_T2GAIN, 
    PP_MAIN_ENV_T3TIME, 
    PP_MAIN_ENV_T3GAIN, 
    PP_MAIN_ENV_T4TIME, 
    PP_MAIN_ENV_T4GAIN, 
    PP_MAIN_ENV_T5TIME, 
    PP_MAIN_ENV_T5GAIN, 
    PP_MAIN_ENV_T6TIME, 
    PP_MAIN_ENV_T6GAIN, 
    PP_MAIN_ENV_T7TIME, 
    PP_MAIN_ENV_T7GAIN, 
    PP_MAIN_ENV_T8TIME, 
    PP_MAIN_ENV_T8GAIN, 
    PP_MAIN_ENV_T9TIME, 
    PP_MAIN_ENV_T9GAIN, 
    PP_MAIN_ENV_T10TIME,
    PP_MAIN_ENV_T10GAIN,
    PP_MAIN_ENV_T11TIME,
    PP_MAIN_ENV_T11GAIN,
    PP_MAIN_ENV_T12TIME,
    PP_MAIN_ENV_T12GAIN,
    PP_MAIN_ENV_T13TIME,
    PP_MAIN_ENV_T13GAIN,
    PP_MAIN_ENV_T14TIME,
    PP_MAIN_ENV_T14GAIN,
    PP_MAIN_ENV_T15TIME,
    PP_MAIN_ENV_T15GAIN,
    PP_MAIN_ENV_T16TIME,
    PP_MAIN_ENV_T16GAIN,
    PP_MAIN_ENV_T17TIME,
    PP_MAIN_ENV_T17GAIN,
    PP_MAIN_ENV_T18TIME,
    PP_MAIN_ENV_T18GAIN,
    PP_MAIN_ENV_T19TIME,
    PP_MAIN_ENV_T19GAIN,
    PP_MAIN_ENV_T20TIME,
    PP_MAIN_ENV_T20GAIN,
    PP_MAIN_ENV_T21TIME,
    PP_MAIN_ENV_T21GAIN,
    PP_MAIN_ENV_T22TIME,
    PP_MAIN_ENV_T22GAIN,
    PP_MAIN_ENV_T23TIME,
    PP_MAIN_ENV_T23GAIN,
    PP_MAIN_ENV_T24TIME,
    PP_MAIN_ENV_T24GAIN,

    PP_TONE_ON,
    PP_TONE_LEVEL,
    PP_TONE_F1,
    PP_TONE_F2,
    PP_TONE_DROOP,
    PP_TONE_PHASE,

    PP_TONE_ENV_T1TIME, 
    PP_TONE_ENV_T1GAIN, 
    PP_TONE_ENV_T2TIME, 
    PP_TONE_ENV_T2GAIN, 
    PP_TONE_ENV_T3TIME, 
    PP_TONE_ENV_T3GAIN, 
    PP_TONE_ENV_T4TIME, 
    PP_TONE_ENV_T4GAIN, 
    PP_TONE_ENV_T5TIME, 
    PP_TONE_ENV_T5GAIN, 
    PP_TONE_ENV_T6TIME, 
    PP_TONE_ENV_T6GAIN, 
    PP_TONE_ENV_T7TIME, 
    PP_TONE_ENV_T7GAIN, 
    PP_TONE_ENV_T8TIME, 
    PP_TONE_ENV_T8GAIN, 
    PP_TONE_ENV_T9TIME, 
    PP_TONE_ENV_T9GAIN, 
    PP_TONE_ENV_T10TIME,
    PP_TONE_ENV_T10GAIN,
    PP_TONE_ENV_T11TIME,
    PP_TONE_ENV_T11GAIN,
    PP_TONE_ENV_T12TIME,
    PP_TONE_ENV_T12GAIN,
    PP_TONE_ENV_T13TIME,
    PP_TONE_ENV_T13GAIN,
    PP_TONE_ENV_T14TIME,
    PP_TONE_ENV_T14GAIN,
    PP_TONE_ENV_T15TIME,
    PP_TONE_ENV_T15GAIN,
    PP_TONE_ENV_T16TIME,
    PP_TONE_ENV_T16GAIN,
    PP_TONE_ENV_T17TIME,
    PP_TONE_ENV_T17GAIN,
    PP_TONE_ENV_T18TIME,
    PP_TONE_ENV_T18GAIN,
    PP_TONE_ENV_T19TIME,
    PP_TONE_ENV_T19GAIN,
    PP_TONE_ENV_T20TIME,
    PP_TONE_ENV_T20GAIN,
    PP_TONE_ENV_T21TIME,
    PP_TONE_ENV_T21GAIN,
    PP_TONE_ENV_T22TIME,
    PP_TONE_ENV_T22GAIN,
    PP_TONE_ENV_T23TIME,
    PP_TONE_ENV_T23GAIN,
    PP_TONE_ENV_T24TIME,
    PP_TONE_ENV_T24GAIN,

    PP_NOIZ_ON,
    PP_NOIZ_LEVEL,
    PP_NOIZ_SLOPE,
    PP_NOIZ_FIXEDSEQ,

    PP_NOIZ_ENV_T1TIME, 
    PP_NOIZ_ENV_T1GAIN, 
    PP_NOIZ_ENV_T2TIME, 
    PP_NOIZ_ENV_T2GAIN, 
    PP_NOIZ_ENV_T3TIME, 
    PP_NOIZ_ENV_T3GAIN, 
    PP_NOIZ_ENV_T4TIME, 
    PP_NOIZ_ENV_T4GAIN, 
    PP_NOIZ_ENV_T5TIME, 
    PP_NOIZ_ENV_T5GAIN, 
    PP_NOIZ_ENV_T6TIME, 
    PP_NOIZ_ENV_T6GAIN, 
    PP_NOIZ_ENV_T7TIME, 
    PP_NOIZ_ENV_T7GAIN, 
    PP_NOIZ_ENV_T8TIME, 
    PP_NOIZ_ENV_T8GAIN, 
    PP_NOIZ_ENV_T9TIME, 
    PP_NOIZ_ENV_T9GAIN, 
    PP_NOIZ_ENV_T10TIME,
    PP_NOIZ_ENV_T10GAIN,
    PP_NOIZ_ENV_T11TIME,
    PP_NOIZ_ENV_T11GAIN,
    PP_NOIZ_ENV_T12TIME,
    PP_NOIZ_ENV_T12GAIN,
    PP_NOIZ_ENV_T13TIME,
    PP_NOIZ_ENV_T13GAIN,
    PP_NOIZ_ENV_T14TIME,
    PP_NOIZ_ENV_T14GAIN,
    PP_NOIZ_ENV_T15TIME,
    PP_NOIZ_ENV_T15GAIN,
    PP_NOIZ_ENV_T16TIME,
    PP_NOIZ_ENV_T16GAIN,
    PP_NOIZ_ENV_T17TIME,
    PP_NOIZ_ENV_T17GAIN,
    PP_NOIZ_ENV_T18TIME,
    PP_NOIZ_ENV_T18GAIN,
    PP_NOIZ_ENV_T19TIME,
    PP_NOIZ_ENV_T19GAIN,
    PP_NOIZ_ENV_T20TIME,
    PP_NOIZ_ENV_T20GAIN,
    PP_NOIZ_ENV_T21TIME,
    PP_NOIZ_ENV_T21GAIN,
    PP_NOIZ_ENV_T22TIME,
    PP_NOIZ_ENV_T22GAIN,
    PP_NOIZ_ENV_T23TIME,
    PP_NOIZ_ENV_T23GAIN,
    PP_NOIZ_ENV_T24TIME,
    PP_NOIZ_ENV_T24GAIN,

    PP_OTON_ON,
    PP_OTON_LEVEL,
    PP_OTON_F1,
    PP_OTON_WAVE1,
    PP_OTON_TRACK1,
    PP_OTON_F2,
    PP_OTON_WAVE2,
    PP_OTON_TRACK2,
    PP_OTON_METHOD,
    PP_OTON_PARAM,
    PP_OTON_FILTER,
    
    PP_OTON1_ENV_T1TIME, 
    PP_OTON1_ENV_T1GAIN, 
    PP_OTON1_ENV_T2TIME, 
    PP_OTON1_ENV_T2GAIN, 
    PP_OTON1_ENV_T3TIME, 
    PP_OTON1_ENV_T3GAIN, 
    PP_OTON1_ENV_T4TIME, 
    PP_OTON1_ENV_T4GAIN, 
    PP_OTON1_ENV_T5TIME, 
    PP_OTON1_ENV_T5GAIN, 
    PP_OTON1_ENV_T6TIME, 
    PP_OTON1_ENV_T6GAIN, 
    PP_OTON1_ENV_T7TIME, 
    PP_OTON1_ENV_T7GAIN, 
    PP_OTON1_ENV_T8TIME, 
    PP_OTON1_ENV_T8GAIN, 
    PP_OTON1_ENV_T9TIME, 
    PP_OTON1_ENV_T9GAIN, 
    PP_OTON1_ENV_T10TIME,
    PP_OTON1_ENV_T10GAIN,
    PP_OTON1_ENV_T11TIME,
    PP_OTON1_ENV_T11GAIN,
    PP_OTON1_ENV_T12TIME,
    PP_OTON1_ENV_T12GAIN,
    PP_OTON1_ENV_T13TIME,
    PP_OTON1_ENV_T13GAIN,
    PP_OTON1_ENV_T14TIME,
    PP_OTON1_ENV_T14GAIN,
    PP_OTON1_ENV_T15TIME,
    PP_OTON1_ENV_T15GAIN,
    PP_OTON1_ENV_T16TIME,
    PP_OTON1_ENV_T16GAIN,
    PP_OTON1_ENV_T17TIME,
    PP_OTON1_ENV_T17GAIN,
    PP_OTON1_ENV_T18TIME,
    PP_OTON1_ENV_T18GAIN,
    PP_OTON1_ENV_T19TIME,
    PP_OTON1_ENV_T19GAIN,
    PP_OTON1_ENV_T20TIME,
    PP_OTON1_ENV_T20GAIN,
    PP_OTON1_ENV_T21TIME,
    PP_OTON1_ENV_T21GAIN,
    PP_OTON1_ENV_T22TIME,
    PP_OTON1_ENV_T22GAIN,
    PP_OTON1_ENV_T23TIME,
    PP_OTON1_ENV_T23GAIN,
    PP_OTON1_ENV_T24TIME,
    PP_OTON1_ENV_T24GAIN,

    PP_OTON2_ENV_T1TIME, 
    PP_OTON2_ENV_T1GAIN, 
    PP_OTON2_ENV_T2TIME, 
    PP_OTON2_ENV_T2GAIN, 
    PP_OTON2_ENV_T3TIME, 
    PP_OTON2_ENV_T3GAIN, 
    PP_OTON2_ENV_T4TIME, 
    PP_OTON2_ENV_T4GAIN, 
    PP_OTON2_ENV_T5TIME, 
    PP_OTON2_ENV_T5GAIN, 
    PP_OTON2_ENV_T6TIME, 
    PP_OTON2_ENV_T6GAIN, 
    PP_OTON2_ENV_T7TIME, 
    PP_OTON2_ENV_T7GAIN, 
    PP_OTON2_ENV_T8TIME, 
    PP_OTON2_ENV_T8GAIN, 
    PP_OTON2_ENV_T9TIME, 
    PP_OTON2_ENV_T9GAIN, 
    PP_OTON2_ENV_T10TIME,
    PP_OTON2_ENV_T10GAIN,
    PP_OTON2_ENV_T11TIME,
    PP_OTON2_ENV_T11GAIN,
    PP_OTON2_ENV_T12TIME,
    PP_OTON2_ENV_T12GAIN,
    PP_OTON2_ENV_T13TIME,
    PP_OTON2_ENV_T13GAIN,
    PP_OTON2_ENV_T14TIME,
    PP_OTON2_ENV_T14GAIN,
    PP_OTON2_ENV_T15TIME,
    PP_OTON2_ENV_T15GAIN,
    PP_OTON2_ENV_T16TIME,
    PP_OTON2_ENV_T16GAIN,
    PP_OTON2_ENV_T17TIME,
    PP_OTON2_ENV_T17GAIN,
    PP_OTON2_ENV_T18TIME,
    PP_OTON2_ENV_T18GAIN,
    PP_OTON2_ENV_T19TIME,
    PP_OTON2_ENV_T19GAIN,
    PP_OTON2_ENV_T20TIME,
    PP_OTON2_ENV_T20GAIN,
    PP_OTON2_ENV_T21TIME,
    PP_OTON2_ENV_T21GAIN,
    PP_OTON2_ENV_T22TIME,
    PP_OTON2_ENV_T22GAIN,
    PP_OTON2_ENV_T23TIME,
    PP_OTON2_ENV_T23GAIN,
    PP_OTON2_ENV_T24TIME,
    PP_OTON2_ENV_T24GAIN,

    PP_NBA1_ON,
    PP_NBA1_LEVEL,
    PP_NBA1_F,
    PP_NBA1_DF,

    PP_NBA1_ENV_T1TIME, 
    PP_NBA1_ENV_T1GAIN, 
    PP_NBA1_ENV_T2TIME, 
    PP_NBA1_ENV_T2GAIN, 
    PP_NBA1_ENV_T3TIME, 
    PP_NBA1_ENV_T3GAIN, 
    PP_NBA1_ENV_T4TIME, 
    PP_NBA1_ENV_T4GAIN, 
    PP_NBA1_ENV_T5TIME, 
    PP_NBA1_ENV_T5GAIN, 
    PP_NBA1_ENV_T6TIME, 
    PP_NBA1_ENV_T6GAIN, 
    PP_NBA1_ENV_T7TIME, 
    PP_NBA1_ENV_T7GAIN, 
    PP_NBA1_ENV_T8TIME, 
    PP_NBA1_ENV_T8GAIN, 
    PP_NBA1_ENV_T9TIME, 
    PP_NBA1_ENV_T9GAIN, 
    PP_NBA1_ENV_T10TIME,
    PP_NBA1_ENV_T10GAIN,
    PP_NBA1_ENV_T11TIME,
    PP_NBA1_ENV_T11GAIN,
    PP_NBA1_ENV_T12TIME,
    PP_NBA1_ENV_T12GAIN,
    PP_NBA1_ENV_T13TIME,
    PP_NBA1_ENV_T13GAIN,
    PP_NBA1_ENV_T14TIME,
    PP_NBA1_ENV_T14GAIN,
    PP_NBA1_ENV_T15TIME,
    PP_NBA1_ENV_T15GAIN,
    PP_NBA1_ENV_T16TIME,
    PP_NBA1_ENV_T16GAIN,
    PP_NBA1_ENV_T17TIME,
    PP_NBA1_ENV_T17GAIN,
    PP_NBA1_ENV_T18TIME,
    PP_NBA1_ENV_T18GAIN,
    PP_NBA1_ENV_T19TIME,
    PP_NBA1_ENV_T19GAIN,
    PP_NBA1_ENV_T20TIME,
    PP_NBA1_ENV_T20GAIN,
    PP_NBA1_ENV_T21TIME,
    PP_NBA1_ENV_T21GAIN,
    PP_NBA1_ENV_T22TIME,
    PP_NBA1_ENV_T22GAIN,
    PP_NBA1_ENV_T23TIME,
    PP_NBA1_ENV_T23GAIN,
    PP_NBA1_ENV_T24TIME,
    PP_NBA1_ENV_T24GAIN,

    PP_NBA2_ON,
    PP_NBA2_LEVEL,
    PP_NBA2_F,
    PP_NBA2_DF,

    PP_NBA2_ENV_T1TIME, 
    PP_NBA2_ENV_T1GAIN, 
    PP_NBA2_ENV_T2TIME, 
    PP_NBA2_ENV_T2GAIN, 
    PP_NBA2_ENV_T3TIME, 
    PP_NBA2_ENV_T3GAIN, 
    PP_NBA2_ENV_T4TIME, 
    PP_NBA2_ENV_T4GAIN, 
    PP_NBA2_ENV_T5TIME, 
    PP_NBA2_ENV_T5GAIN, 
    PP_NBA2_ENV_T6TIME, 
    PP_NBA2_ENV_T6GAIN, 
    PP_NBA2_ENV_T7TIME, 
    PP_NBA2_ENV_T7GAIN, 
    PP_NBA2_ENV_T8TIME, 
    PP_NBA2_ENV_T8GAIN, 
    PP_NBA2_ENV_T9TIME, 
    PP_NBA2_ENV_T9GAIN, 
    PP_NBA2_ENV_T10TIME,
    PP_NBA2_ENV_T10GAIN,
    PP_NBA2_ENV_T11TIME,
    PP_NBA2_ENV_T11GAIN,
    PP_NBA2_ENV_T12TIME,
    PP_NBA2_ENV_T12GAIN,
    PP_NBA2_ENV_T13TIME,
    PP_NBA2_ENV_T13GAIN,
    PP_NBA2_ENV_T14TIME,
    PP_NBA2_ENV_T14GAIN,
    PP_NBA2_ENV_T15TIME,
    PP_NBA2_ENV_T15GAIN,
    PP_NBA2_ENV_T16TIME,
    PP_NBA2_ENV_T16GAIN,
    PP_NBA2_ENV_T17TIME,
    PP_NBA2_ENV_T17GAIN,
    PP_NBA2_ENV_T18TIME,
    PP_NBA2_ENV_T18GAIN,
    PP_NBA2_ENV_T19TIME,
    PP_NBA2_ENV_T19GAIN,
    PP_NBA2_ENV_T20TIME,
    PP_NBA2_ENV_T20GAIN,
    PP_NBA2_ENV_T21TIME,
    PP_NBA2_ENV_T21GAIN,
    PP_NBA2_ENV_T22TIME,
    PP_NBA2_ENV_T22GAIN,
    PP_NBA2_ENV_T23TIME,
    PP_NBA2_ENV_T23GAIN,
    PP_NBA2_ENV_T24TIME,
    PP_NBA2_ENV_T24GAIN,

    PP_DIST_ON,
    PP_DIST_CLIPPING,
    PP_DIST_BITS,
    PP_DIST_RATE,

    // total number of parameters ------------------------------

    COUNT_PRESET_PARAMS
};
